---
name: learn
description: Capture knowledge from codebase exploration. Triggers on "learn how...", "document how...", "remember how...", "save knowledge about...".
---

# Learn

Capture codebase understanding as searchable knowledge. **What you learn once, Claude remembers forever.**

## Workflow

### Step 1: Recall — Search what we already know

Before exploring, check if knowledge already exists on this topic.

```bash
npx superintent search "<topic keywords>" --limit 5
```

**Semantic Search:** ≥0.45 relevant, ≥0.55 strong. Don't discard low scores.

If strong matches exist → present them. `AskUserQuestion`: "Existing knowledge found. Still explore, or is this sufficient?" → Explore deeper | Sufficient

### Step 2: Explore — Understand the topic

Use Task tool with `subagent_type=Explore` to understand the topic.

**Parallel exploration:** For complex topics, run multiple Explore agents in parallel (one message, multiple Task calls) — e.g., explore architecture + explore patterns + explore usage.

Present findings conversationally as you go.

### Step 3: Compose — Draft the knowledge entry

Synthesize exploration findings into a knowledge entry.

1. Preview knowledge using the template in Step 4
2. Highlight what's new vs what overlaps with existing knowledge from Step 1
3. `AskUserQuestion`: "Save this knowledge?" → Save | Edit | Cancel
   - **Save** → proceed to Step 4
   - **Edit** → adjust, re-present
   - **Cancel** → done

### Step 4: Save — Persist the knowledge

1. **Create via CLI** using heredoc markdown (always `--stdin`, never JSON)
2. **ID is auto-generated by the CLI** (format: `KNOWLEDGE-YYYYMMDD-HHMMSS`). Do NOT include an ID in the markdown — the CLI response contains the generated ID. If create fails → CLI returns specific field errors, fix the markdown and retry.

```bash
npx superintent knowledge create --stdin <<'KNOWLEDGE'
# {Title}

**Namespace:** {namespace} from CLAUDE.md
**Category:** {architecture|pattern|truth|principle|gotcha}
**Source:** discovery
**Confidence:** {see Confidence Defaults}
**Scope:** {new-only|global|backward-compatible|legacy-frozen}
**Tags:** {kebab-case, comma-separated}

## Content

{Use Content Formats from Reference}
KNOWLEDGE
```

3. **Report** the knowledge ID from CLI response

---

## Reference

### Confidence Defaults

| Category | Default |
|----------|---------|
| Truth | 0.9 |
| Architecture / Gotcha | 0.85 |
| Pattern | 0.8 |
| Principle | 0.75 |

### Content Formats

**Architecture:** `Component` / `Responsibility` / `Interfaces`

**Pattern:** `Why` / `When` / `Pattern`

**Truth:** `Fact` / `Verified`

**Principle:** `Rule` / `Why` / `Applies`

**Gotcha:** `Attempted` / `Failed Because` / `Instead` / `Symptoms`
